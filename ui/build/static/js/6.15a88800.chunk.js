(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[6],{631:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(168);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return n}}(e,t)||Object(a.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},683:function(e,t,n){e.exports=function(e,t){"use strict";function n(t){return e.createElement("button",{type:"button",className:t.classNames.selectedTag,title:t.removeButtonText,onClick:t.onDelete},e.createElement("span",{className:t.classNames.selectedTagName},t.tag.name))}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var a={position:"absolute",width:0,height:0,visibility:"hidden",overflow:"scroll",whiteSpace:"pre"},s=["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing","textTransform"],r=function(t){function n(n){t.call(this,n),this.state={inputWidth:null},this.input=e.createRef(),this.sizer=e.createRef()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.componentDidMount=function(){this.props.autoresize&&(this.copyInputStyles(),this.updateInputWidth())},n.prototype.componentDidUpdate=function(e){var t=e.query,n=e.placeholder;t===this.props.query&&n===this.props.placeholder||this.updateInputWidth()},n.prototype.copyInputStyles=function(){var e=this,t=window.getComputedStyle(this.input.current);s.forEach((function(n){e.sizer.current.style[n]=t[n]}))},n.prototype.updateInputWidth=function(){var e;this.props.autoresize&&(e=Math.ceil(this.sizer.current.scrollWidth)+2),e!==this.state.inputWidth&&this.setState({inputWidth:e})},n.prototype.render=function(){var t=this.props,n=t.id,s=t.query,r=t.ariaLabelText,o=t.placeholderText,i=t.expanded,l=t.classNames,c=t.inputAttributes,u=t.inputEventHandlers,p=t.index;return e.createElement("div",{className:l.searchWrapper},e.createElement("input",Object.assign({},c,u,{ref:this.input,value:s,placeholder:o,className:l.searchInput,role:"combobox","aria-autocomplete":"list","aria-label":r||o,"aria-owns":n,"aria-activedescendant":p>-1?n+"-"+p:null,"aria-expanded":i,style:{width:this.state.inputWidth}})),e.createElement("div",{ref:this.sizer,style:a},s||o))},n}(e.Component);function o(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}function i(e,t){var n=new RegExp(o(t),"gi");return e.replace(n,"<mark>$&</mark>")}var l=function(t){var n=t.item,a=t.query;return e.createElement("span",{dangerouslySetInnerHTML:{__html:i(n.name,a)}})},c=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onMouseDown=function(e,t){t.preventDefault(),this.props.addTag(e)},n.prototype.render=function(){var t=this;if(!this.props.expanded||!this.props.options.length)return null;var n=this.props.suggestionComponent||l,a=this.props.options.map((function(a,s){var r=t.props.id+"-"+s,o=[];return t.props.index===s&&o.push(t.props.classNames.suggestionActive),a.disabled&&o.push(t.props.classNames.suggestionDisabled),e.createElement("li",{id:r,key:r,role:"option",className:o.join(" "),"aria-disabled":!0===a.disabled,onMouseDown:t.onMouseDown.bind(t,a)},a.disableMarkIt?a.name:e.createElement(n,{item:a,query:t.props.query}))}));return e.createElement("div",{className:this.props.classNames.suggestions},e.createElement("ul",{role:"listbox",id:this.props.id},a))},n}(e.Component),u="Enter",p="Tab",d="Backspace",h="ArrowUp",m="Up",f="ArrowDown",g="Down";function y(){var e=this;if(this.state.query.length>=this.props.minQueryLength){var t=this.state.options.findIndex((function(t){return(n=e.state.query,new RegExp("^"+o(n)+"$","i")).test(t.name);var n})),n=-1===this.state.index?t:this.state.index;n>-1&&this.state.options[n]?this.addTag(this.state.options[n]):this.props.allowNew&&this.addTag({name:this.state.query})}}function b(e){e.preventDefault();var t=this.state.options.length-1;this.setState({index:this.state.index<=0?t:this.state.index-1})}function v(e){e.preventDefault();var t=this.state.options.length-1;this.setState({index:this.state.index>=t?0:this.state.index+1})}function E(){this.state.query.length||this.deleteTag(this.props.tags.length-1)}function x(e,t){var n;return 0===(n=e.suggestionsTransform?e.suggestionsTransform(t.query,e.suggestions):e.suggestions.filter((function(n){return e.suggestionsFilter(n,t.query)}))).length&&e.noSuggestionsText&&n.push({id:0,name:e.noSuggestionsText,disabled:!0,disableMarkIt:!0}),n.slice(0,e.maxSuggestionsLength)}var w=function(t){function a(n){t.call(this,n),this.state={query:"",focused:!1,index:-1},this.inputEventHandlers={onChange:function(){},onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onInput:this.onInput.bind(this),onKeyDown:this.onKeyDown.bind(this)},this.container=e.createRef(),this.input=e.createRef(),this.suggestions=e.createRef()}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype.onInput=function(e){var t=e.target.value;this.props.onInput&&this.props.onInput(t),t.length===this.state.query.length+1&&this.props.delimiters.indexOf(t.slice(-1))>-1?y.call(this):t!==this.state.query&&this.setState({query:t})},a.prototype.onKeyDown=function(e){this.props.delimiters.indexOf(e.key)>-1&&((this.state.query||this.state.index>-1)&&e.preventDefault(),y.call(this)),e.key===d&&this.props.allowBackspace&&E.call(this,e),e.key!==h&&e.key!==m||b.call(this,e),e.key!==f&&e.key!==g||v.call(this,e)},a.prototype.onClick=function(e){document.activeElement!==e.target&&this.input.current.input.current.focus()},a.prototype.onBlur=function(){this.setState({focused:!1,index:-1}),this.props.onBlur&&this.props.onBlur(),this.props.addOnBlur&&y.call(this)},a.prototype.onFocus=function(){this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus()},a.prototype.onDeleteTag=function(e,t){if(this.container.current){var n=this.container.current.querySelectorAll("a,button,input"),a=Array.prototype.findIndex.call(n,(function(e){return e===t.currentTarget})),s=n[a-1]||n[a+1];s&&s.focus()}this.deleteTag(e)},a.prototype.addTag=function(e){e.disabled||("function"!==typeof this.props.onValidate||this.props.onValidate(e))&&(this.props.onAddition(e),this.clearInput())},a.prototype.deleteTag=function(e){this.props.onDelete(e)},a.prototype.clearInput=function(){this.setState({query:"",index:-1})},a.prototype.render=function(){var t=this,a=this.props.tagComponent||n,s=this.state.focused&&this.state.query.length>=this.props.minQueryLength,o=[this.props.classNames.root];return this.state.focused&&o.push(this.props.classNames.rootFocused),e.createElement("div",{ref:this.container,className:o.join(" "),onClick:this.onClick.bind(this)},e.createElement("div",{className:this.props.classNames.selected,"aria-relevant":"additions removals","aria-live":"polite"},this.props.tags.map((function(n,s){return e.createElement(a,{key:s,tag:n,removeButtonText:t.props.removeButtonText,classNames:t.props.classNames,onDelete:t.onDeleteTag.bind(t,s)})}))),e.createElement("div",{className:this.props.classNames.search},e.createElement(r,Object.assign({},this.state,{id:this.props.id,ref:this.input,classNames:this.props.classNames,inputAttributes:this.props.inputAttributes,inputEventHandlers:this.inputEventHandlers,autoresize:this.props.autoresize,expanded:s,placeholderText:this.props.placeholderText,ariaLabelText:this.props.ariaLabelText})),e.createElement(c,Object.assign({},this.state,{id:this.props.id,ref:this.suggestions,classNames:this.props.classNames,expanded:s,addTag:this.addTag.bind(this),suggestionComponent:this.props.suggestionComponent}))))},a.getDerivedStateFromProps=function(e,t){return t.prevQuery!==t.query||t.prevSuggestions!==e.suggestions?{prevQuery:t.query,prevSuggestions:e.suggestions,options:x(e,t)}:null},a}(e.Component);return w.defaultProps={id:"ReactTags",tags:[],placeholderText:"Add new tag",removeButtonText:"Click to remove tag",noSuggestionsText:null,suggestions:[],suggestionsFilter:function(e,t){return(n=t,new RegExp("(?:^|\\s)"+o(n),"i")).test(e.name);var n},suggestionsTransform:null,autoresize:!0,classNames:{root:"react-tags",rootFocused:"is-focused",selected:"react-tags__selected",selectedTag:"react-tags__selected-tag",selectedTagName:"react-tags__selected-tag-name",search:"react-tags__search",searchWrapper:"react-tags__search-wrapper",searchInput:"react-tags__search-input",suggestions:"react-tags__suggestions",suggestionActive:"is-active",suggestionDisabled:"is-disabled"},delimiters:[p,u],minQueryLength:2,maxSuggestionsLength:6,allowNew:!1,allowBackspace:!0,addOnBlur:!1,tagComponent:null,suggestionComponent:null,inputAttributes:{}},w.propTypes={id:t.string,tags:t.arrayOf(t.object),placeholderText:t.string,ariaLabelText:t.string,removeButtonText:t.string,noSuggestionsText:t.string,suggestions:t.arrayOf(t.object),suggestionsFilter:t.func,suggestionsTransform:t.func,autoresize:t.bool,delimiters:t.arrayOf(t.string),onDelete:t.func.isRequired,onAddition:t.func.isRequired,onInput:t.func,onFocus:t.func,onBlur:t.func,onValidate:t.func,minQueryLength:t.number,maxSuggestionsLength:t.number,classNames:t.object,allowNew:t.bool,allowBackspace:t.bool,addOnBlur:t.bool,tagComponent:t.oneOfType([t.func,t.element]),suggestionComponent:t.oneOfType([t.func,t.element]),inputAttributes:t.object},w}(n(1),n(57))},689:function(e,t,n){"use strict";n.r(t);var a=n(114),s=n.n(a),r=n(161),o=n(170),i=n(631),l=n(1),c=n.n(l),u=n(630),p=n(632),d=n(683),h=n.n(d),m=function(e){var t=c.a.useState(!1),n=Object(i.a)(t,2),a=n[0],s=n[1],o=c.a.useState(!1),d=Object(i.a)(o,2),m=d[0],f=d[1],g=c.a.useState(e),y=Object(i.a)(g,2),b=y[0],v=(y[1],c.a.useState(e.name)),E=Object(i.a)(v,2),x=E[0],w=E[1],T=c.a.useState(e.email_address),S=Object(i.a)(T,2),j=S[0],O=S[1],N=c.a.useState(""),k=Object(i.a)(N,2),_=k[0],C=k[1],q=c.a.useState(e.roles),D=Object(i.a)(q,2),I=(D[0],D[1]),B=c.a.useState([]),A=Object(i.a)(B,2),L=A[0],W=A[1];return Object(l.useEffect)((function(){var t,n=[],a=Object(r.a)(e.appList);try{for(a.s();!(t=a.n()).done;){var s,o=t.value,i=Object(r.a)(o.availableRoles);try{for(i.s();!(s=i.n()).done;){var l=s.value;n.push({id:l.id,name:o.name+": "+l.name})}}catch(c){i.e(c)}finally{i.f()}}}catch(c){a.e(c)}finally{a.f()}return W(n),function(){}}),[e.appList]),c.a.createElement(u.u,{xl:6},c.a.createElement(u.j,null,c.a.createElement(u.n,null,c.a.createElement(p.a,{name:"cil-user"})," ",b.login," (",b.email_address,")",c.a.createElement("div",{className:"card-header-actions"},c.a.createElement(u.db,{className:"card-header-action",onClick:function(){f(!0),O(b.email_address),w(b.name),I(b.roles),C("")}},c.a.createElement(p.a,{name:"cil-pencil"})),c.a.createElement(u.db,{className:"card-header-action",onClick:function(){return s(!a)}},c.a.createElement(p.a,{name:a?"cil-chevron-bottom":"cil-chevron-top"})))),c.a.createElement(u.v,{show:a},c.a.createElement(u.k,null,c.a.createElement("h5",null,"Roles"),!!b.description&&c.a.createElement("p",{class:"lead"},c.a.createElement("em",null,b.description)),b.appList.map((function(e){return c.a.createElement("div",null,c.a.createElement("h6",null,e.name),c.a.createElement("h5",null,b.roles.filter((function(t){return t.appId===e.id})).map((function(e){return c.a.createElement(u.b,{shape:"pill",color:"primary"},e.name)}))))}))))),c.a.createElement(u.gb,{show:m,onClose:function(){return f(!1)},size:"lg"},c.a.createElement(u.J,{onSubmit:function(){f(!1)}},c.a.createElement(u.jb,{closeButton:!0},c.a.createElement(u.kb,null,"Edit details of ",b.name)),c.a.createElement(u.hb,null,c.a.createElement(u.K,null,c.a.createElement(u.V,null,c.a.createElement(u.S,{onChange:function(e){return w(e.value)},value:x,id:"username",name:"username",placeholder:"Username",autoComplete:"username"}),c.a.createElement(u.W,null,c.a.createElement(u.Y,null,c.a.createElement(p.a,{name:"cil-user"}))))),c.a.createElement(u.K,null,c.a.createElement(u.V,null,c.a.createElement(u.S,{onChange:function(e){return O(e.value)},value:j,type:"email",id:"email",name:"email",placeholder:"Email",autoComplete:"email"}),c.a.createElement(u.W,null,c.a.createElement(u.Y,null,c.a.createElement(p.a,{name:"cil-envelope-closed"}))))),c.a.createElement(u.K,null,c.a.createElement(u.V,null,c.a.createElement(u.S,{onChange:function(e){return C(e.value)},value:_,type:"password",id:"password",name:"password",placeholder:"Password"}),c.a.createElement(u.W,null,c.a.createElement(u.Y,null,c.a.createElement(p.a,{name:"cil-asterisk"}))))),c.a.createElement(u.K,null,c.a.createElement(u.V,null,c.a.createElement(h.a,{onAddition:function(e){console.log("add",e)},onDelete:function(e){console.log("delete",e)},suggestions:L}),c.a.createElement(u.W,null,c.a.createElement(u.Y,null,c.a.createElement(p.a,{name:"cil-tag"})))))),c.a.createElement(u.ib,null,c.a.createElement(u.f,{color:"secondary",onClick:function(){return f(!1)}},"Cancel")," ",c.a.createElement(u.f,{type:"submit",color:"primary"},"Save")))))};t.default=function(){var e=Object(l.useState)({data:[]}),t=Object(i.a)(e,2),n=t[0],a=t[1],p=Object(l.useState)({data:[]}),d=Object(i.a)(p,2),h=d[0],f=d[1];return Object(l.useEffect)((function(){var e=!1;function t(){return(t=Object(o.a)(s.a.mark((function t(){var n,o,i,l,c,u,p,d,h,m,g,y,b,v,E,x;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return n={},t.next=5,fetch("http://localhost/admin/api/v0/apps",{method:"GET"});case 5:if(200!==(o=t.sent).status){t.next=13;break}return t.next=9,o.json();case 9:i=t.sent,l=Object(r.a)(i.data);try{for(l.s();!(c=l.n()).done;)u=c.value,n[u.id]=u}catch(s){l.e(s)}finally{l.f()}f(i);case 13:return t.next=15,fetch("http://localhost/admin/api/v0/users",{method:"GET"});case 15:if(200!==(p=t.sent).status){t.next=23;break}return t.next=19,p.json();case 19:d=t.sent,h=Object(r.a)(d.data);try{for(h.s();!(m=h.n()).done;){g=m.value,y=[],b=Object(r.a)(g.roles);try{for(b.s();!(v=b.n()).done;)E=v.value,x=n[E.appId],y.push(x)}catch(s){b.e(s)}finally{b.f()}y.sort((function(e,t){return e.name>t.name?1:-1})),g.appList=y}}catch(s){h.e(s)}finally{h.f()}a(d);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.wb,null,c.a.createElement(u.u,null,c.a.createElement(u.j,null,c.a.createElement(u.k,null,"stuff")))),c.a.createElement(u.wb,null," ",n.data.map((function(e){return c.a.createElement(m,Object.assign({},e,{appList:h}))}))," "))}}}]);
//# sourceMappingURL=6.15a88800.chunk.js.map